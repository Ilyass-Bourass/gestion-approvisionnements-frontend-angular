<div class="max-w-4xl mx-auto space-y-6">
  <div class="flex items-center justify-between">
    <h2 class="text-3xl font-bold text-gray-800 flex items-center gap-2">
      <span>{{ isEditMode ? '‚úèÔ∏è' : '‚ûï' }}</span>
      <span>{{ isEditMode ? 'Modifier le fournisseur' : 'Ajouter un fournisseur' }}</span>
    </h2>
    <button
      (click)="cancel()"
      class="px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors"
    >
      ‚Üê Retour
    </button>
  </div>

  <div class="bg-white rounded-xl shadow-lg p-8">
    <form [formGroup]="fournisseurForm" (ngSubmit)="onSubmit()" class="space-y-6">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Raison Sociale -->
        <div class="md:col-span-2">
          <label for="raisonSociale" class="block text-sm font-semibold text-gray-700 mb-2">
            Raison Sociale <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="raisonSociale"
            formControlName="raisonSociale"
            placeholder="TRICOL SARL"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            [class.border-red-500]="raisonSociale?.invalid && raisonSociale?.touched"
          />
          @if (raisonSociale?.touched && raisonSociale?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">La raison sociale est obligatoire</p>
          }
        </div>

        <!-- Adresse -->
        <div class="md:col-span-2">
          <label for="adresse" class="block text-sm font-semibold text-gray-700 mb-2">
            Adresse <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="adresse"
            formControlName="adresse"
            placeholder="123 Rue Mohammed V"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            [class.border-red-500]="adresse?.invalid && adresse?.touched"
          />
          @if (adresse?.touched && adresse?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">L'adresse est obligatoire</p>
          }
        </div>

        <!-- Personne de Contact -->
        <div>
          <label for="personneContact" class="block text-sm font-semibold text-gray-700 mb-2">
            Personne de Contact <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="personneContact"
            formControlName="personneContact"
            placeholder="Ahmed Bennani"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            [class.border-red-500]="personneContact?.invalid && personneContact?.touched"
          />
          @if (personneContact?.touched && personneContact?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">La personne de contact est obligatoire</p>
          }
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
            Email <span class="text-red-500">*</span>
          </label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="contact@tricol.ma"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            [class.border-red-500]="email?.invalid && email?.touched"
          />
          @if (email?.touched && email?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">L'email est obligatoire</p>
          }
          @if (email?.touched && email?.hasError('email')) {
            <p class="text-red-500 text-sm mt-1">Email invalide</p>
          }
        </div>

        <!-- T√©l√©phone -->
        <div>
          <label for="telephone" class="block text-sm font-semibold text-gray-700 mb-2">
            T√©l√©phone <span class="text-red-500">*</span>
          </label>
          <input
            type="tel"
            id="telephone"
            formControlName="telephone"
            placeholder="0612345678"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            [class.border-red-500]="telephone?.invalid && telephone?.touched"
          />
          @if (telephone?.touched && telephone?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">Le t√©l√©phone est obligatoire</p>
          }
          @if (telephone?.touched && telephone?.hasError('pattern')) {
            <p class="text-red-500 text-sm mt-1">Format invalide (10 chiffres)</p>
          }
        </div>

        <!-- Ville -->
        <div>
          <label for="ville" class="block text-sm font-semibold text-gray-700 mb-2">
            Ville <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="ville"
            formControlName="ville"
            placeholder="Casablanca"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            [class.border-red-500]="ville?.invalid && ville?.touched"
          />
          @if (ville?.touched && ville?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">La ville est obligatoire</p>
          }
        </div>

        <!-- ICE -->
        <div class="md:col-span-2">
          <label for="ice" class="block text-sm font-semibold text-gray-700 mb-2">
            ICE <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="ice"
            formControlName="ice"
            placeholder="000123456789012"
            maxlength="15"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all font-mono"
            [class.border-red-500]="ice?.invalid && ice?.touched"
          />
          @if (ice?.touched && ice?.hasError('required')) {
            <p class="text-red-500 text-sm mt-1">L'ICE est obligatoire</p>
          }
          @if (ice?.touched && ice?.hasError('pattern')) {
            <p class="text-red-500 text-sm mt-1">Format invalide (15 chiffres)</p>
          }
        </div>
      </div>

      @if (errorMessage) {
        <div class="bg-red-50 border border-red-500 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2">
          <span>‚ö†Ô∏è</span>
          <span>{{ errorMessage }}</span>
        </div>
      }

      <div class="flex items-center justify-end gap-4 pt-4 border-t">
        <button
          type="button"
          (click)="cancel()"
          class="px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors font-medium"
        >
          Annuler
        </button>
        <button
          type="submit"
          [disabled]="fournisseurForm.invalid || isLoading"
          class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium shadow-md hover:shadow-lg flex items-center gap-2"
        >
          @if (isLoading) {
            <span>‚è≥</span>
            <span>Enregistrement...</span>
          } @else {
            <span>{{ isEditMode ? 'üíæ' : '‚úÖ' }}</span>
            <span>{{ isEditMode ? 'Modifier' : 'Cr√©er' }}</span>
          }
        </button>
      </div>
    </form>
  </div>
</div>
